============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- C:\installations\aiprojects\ap-invoice-agent\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\installations\aiprojects\ap-invoice-agent
configfile: pyproject.toml
plugins: anyio-4.12.1, langsmith-0.7.6, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 22 items

tests/test_graph.py::TestProcessingNode::test_successful_invoice_creation PASSED [  4%]
tests/test_graph.py::TestProcessingNode::test_invalid_supplier_rejects PASSED [  9%]
tests/test_graph.py::TestRejectNode::test_rejection_report PASSED        [ 13%]
tests/test_mcp_erp_server.py::TestValidateVat::test_valid_vat PASSED     [ 18%]
tests/test_mcp_erp_server.py::TestValidateVat::test_invalid_vat PASSED   [ 22%]
tests/test_mcp_erp_server.py::TestValidateVat::test_vat_case_insensitive PASSED [ 27%]
tests/test_mcp_erp_server.py::TestValidateSiret::test_valid_siret PASSED [ 31%]
tests/test_mcp_erp_server.py::TestValidateSiret::test_invalid_siret PASSED [ 36%]
tests/test_mcp_erp_server.py::TestValidateSupplierBank::test_valid_bank PASSED [ 40%]
tests/test_mcp_erp_server.py::TestValidateSupplierBank::test_invalid_bank PASSED [ 45%]
tests/test_mcp_erp_server.py::TestValidatePurchaseOrder::test_open_po PASSED [ 50%]
tests/test_mcp_erp_server.py::TestValidatePurchaseOrder::test_closed_po PASSED [ 54%]
tests/test_mcp_erp_server.py::TestValidatePurchaseOrder::test_missing_po PASSED [ 59%]
tests/test_mcp_erp_server.py::TestGetSupplierDetails::test_found PASSED  [ 63%]
tests/test_mcp_erp_server.py::TestGetSupplierDetails::test_partial_match PASSED [ 68%]
tests/test_mcp_erp_server.py::TestGetSupplierDetails::test_not_found PASSED [ 72%]
tests/test_mcp_erp_server.py::TestCreateErpInvoice::test_successful_creation PASSED [ 77%]
tests/test_mcp_erp_server.py::TestCreateErpInvoice::test_invalid_vat_rejected PASSED [ 81%]
tests/test_validation_agent.py::TestValidationAgent::test_all_valid PASSED [ 86%]
tests/test_validation_agent.py::TestValidationAgent::test_invalid_vat PASSED [ 90%]
tests/test_validation_agent.py::TestValidationAgent::test_missing_fields PASSED [ 95%]
tests/test_validation_agent.py::TestValidationAgent::test_no_extracted_data PASSED [100%]

============================= 22 passed in 0.71s ==============================
